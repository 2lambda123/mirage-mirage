<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Arg (functoria.Functoria.KEY.Arg)</title><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">functoria</a> &#x00BB; <a href="../../index.html">Functoria</a> &#x00BB; <a href="../index.html">KEY</a> &#x00BB; Arg</nav><header class="odoc-preamble"><h1>Module <code><span>KEY.Arg</span></code></h1><p>Cross-stage command-line arguments.</p><p>Terms for cross-stage arguments.</p><p>This module extends <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner/Arg/index.html">Cmdliner.Arg</a> to allow MetaOCaml-style typed cross-stage persistency of command-line arguments.</p></header><nav class="odoc-toc"><ul><li><a href="#argument-converters">Argument converters</a></li><li><a href="#arguments-and-their-information">Arguments and their information</a></li><li><a href="#optional-arguments">Optional Arguments</a></li></ul></nav><div class="odoc-content"><h2 id="argument-converters"><a href="#argument-converters" class="anchor"></a>Argument converters</h2><div class="odoc-spec"><div class="spec type anchored" id="type-serialize"><a href="#type-serialize" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a serialize</span></span><span> = <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>The type for command-line argument serializers. A value of type <code>'a serialize</code> generates a syntactically valid OCaml representation which evaluates to a value of type <code>'a</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-runtime_conv"><a href="#type-runtime_conv" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a runtime_conv</span></span><span> = string</span></code></div><div class="spec-doc"><p>The type for command-line argument converters used at runtime. A value of type <code>'a runtime_conv</code> is a symbol name of type <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#type-conv">Cmdliner.Arg.conv</a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-converter"><a href="#type-converter" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a converter</span></span><span> = <span><span class="type-var">'a</span> <a href="../../Key/Arg/index.html#type-converter">Key.Arg.converter</a></span></span></code></div><div class="spec-doc"><p>The type for argument converters.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conv"><a href="#val-conv" class="anchor"></a><code><span><span class="keyword">val</span> conv : 
  <span>conv:<span><span class="type-var">'a</span> <span class="xref-unresolved">Cmdliner</span>.Arg.conv</span> <span class="arrow">&#45;&gt;</span></span>
  <span>serialize:<span><span class="type-var">'a</span> <a href="#type-serialize">serialize</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>runtime_conv:<span><span class="type-var">'a</span> <a href="#type-runtime_conv">runtime_conv</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-converter">converter</a></span></span></code></div><div class="spec-doc"><p><code>conv c s r</code> is the argument converter using <code>c</code> to convert user strings into OCaml value, <code>s</code> to convert OCaml values into strings interpretable as OCaml expressions, and the function named <code>r</code> to convert user strings into OCaml values at runtime.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span>string <a href="#type-converter">converter</a></span></span></code></div><div class="spec-doc"><p><code>string</code> converts strings.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span>bool <a href="#type-converter">converter</a></span></span></code></div><div class="spec-doc"><p><code>bool</code> converts booleans.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span>int <a href="#type-converter">converter</a></span></span></code></div><div class="spec-doc"><p><code>int</code> converts integers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span>int64 <a href="#type-converter">converter</a></span></span></code></div><div class="spec-doc"><p><code>int64</code> converts 64-bits integers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span>?sep:char <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-converter">converter</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <a href="#type-converter">converter</a></span></span></code></div><div class="spec-doc"><p><code>list t</code> converts lists of <code>t</code>s.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span><span class="keyword">val</span> pair : <span>?sep:char <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-converter">converter</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-converter">converter</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-converter">converter</a></span></span></code></div><div class="spec-doc"><p><code>pair a b</code> converts <code>a</code> and <code>b</code> to a pair of <code>a, b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-some"><a href="#val-some" class="anchor"></a><code><span><span class="keyword">val</span> some : <span><span><span class="type-var">'a</span> <a href="#type-converter">converter</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-converter">converter</a></span></span></code></div><div class="spec-doc"><p><code>some t</code> converts <code>t</code> options.</p></div></div><h2 id="arguments-and-their-information"><a href="#arguments-and-their-information" class="anchor"></a>Arguments and their information</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = <span><span class="type-var">'a</span> <a href="../../Key/Arg/index.html#type-t">Key.Arg.t</a></span></span></code></div><div class="spec-doc"><p>The type for arguments holding data of type <code>'a</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-info"><a href="#type-info" class="anchor"></a><code><span><span class="keyword">type</span> info</span><span> = <a href="../../Key/Arg/index.html#type-info">Key.Arg.info</a></span></code></div><div class="spec-doc"><p>The type for information about cross-stage command-line arguments. See <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner/Arg/index.html#arginfo">Cmdliner's arguments</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-info"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : 
  <span>?docs:string <span class="arrow">&#45;&gt;</span></span>
  <span>?docv:string <span class="arrow">&#45;&gt;</span></span>
  <span>?doc:string <span class="arrow">&#45;&gt;</span></span>
  <span>?env:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-info">info</a></span></code></div><div class="spec-doc"><p>Define cross-stage information for an argument. See <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner/Arg/index.html#type-info">Cmdliner.Arg.info</a>. If not set, <code>docs</code> is <code>&quot;UNIKERNEL PARAMETERS&quot;</code>.</p></div></div><h2 id="optional-arguments"><a href="#optional-arguments" class="anchor"></a>Optional Arguments</h2><div class="odoc-spec"><div class="spec type anchored" id="type-stage"><a href="#type-stage" class="anchor"></a><code><span><span class="keyword">type</span> stage</span><span> = </span><span>[ </span></code><ol><li id="type-stage.Configure" class="def constructor anchored"><a href="#type-stage.Configure" class="anchor"></a><code><span>| </span></code><code><span>`Configure</span></code></li><li id="type-stage.Run" class="def constructor anchored"><a href="#type-stage.Run" class="anchor"></a><code><span>| </span></code><code><span>`Run</span></code></li><li id="type-stage.Both" class="def constructor anchored"><a href="#type-stage.Both" class="anchor"></a><code><span>| </span></code><code><span>`Both</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>The type for specifying at which stage an argument is available.</p><ul><li><code>`Configure</code> means that the argument is read on the command-line at configuration-time.</li><li><code>`Run</code> means that the argument is read on the command-line at runtime.</li><li><code>`Both</code> means that the argument is read on the command-line both at configuration-time and run-time.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-opt"><a href="#val-opt" class="anchor"></a><code><span><span class="keyword">val</span> opt : <span>?stage:<a href="#type-stage">stage</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-converter">converter</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-info">info</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>opt conv v i</code> is similar to <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner/Arg/index.html#val-opt">Cmdliner.Arg.opt</a> but for cross-stage optional command-line arguments. If not set, <code>stage</code> is <code>`Both</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-required"><a href="#val-required" class="anchor"></a><code><span><span class="keyword">val</span> required : <span>?stage:<a href="#type-stage">stage</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-converter">converter</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-info">info</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>required conv i</code> is similar to <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner/Arg/index.html#val-required">Cmdliner.Arg.required</a> but for cross-stage required command-line arguments. If not set, <code>stage</code> is <code>`Both</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flag"><a href="#val-flag" class="anchor"></a><code><span><span class="keyword">val</span> flag : <span>?stage:<a href="#type-stage">stage</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-info">info</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>flag i</code> is similar to <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner/Arg/index.html#val-flag">Cmdliner.Arg.flag</a> but for cross-stage command-line flags. If not set, <code>stage</code> is <code>`Both</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-opt_all"><a href="#val-opt_all" class="anchor"></a><code><span><span class="keyword">val</span> opt_all : <span>?stage:<a href="#type-stage">stage</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-converter">converter</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-info">info</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <a href="#type-t">t</a></span></span></code></div></div></div></body></html>