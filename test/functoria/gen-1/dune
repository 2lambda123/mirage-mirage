(executable
 (name test)
 (modules test)
 (libraries functoria_test fmt functoria))

(rule
 (targets main.ml)
 (action
  (run ./test.exe)))

(rule
 (alias runtest)
 (package functoria)
 (action
  (diff main.ml.expected main.ml)))
