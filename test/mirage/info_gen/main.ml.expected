(* Geneated by functoria_test *)

let (>>=) x f = f x
let return x = x
let run x = x

module App_make__3 = App.Make(Key_gen)

let bootvar__1 = lazy (
# 8 "lib/mirage/impl/mirage_impl_argv.ml"
  Bootvar.argv ()
);;
# 13 "mirage/main.ml"

let key_gen__2 = lazy (
  let __bootvar__1 = Lazy.force bootvar__1 in
  __bootvar__1 >>= fun _bootvar__1 ->
# 51 "lib/functoria/job.ml"
  return Mirage_runtime.(with_argv (runtime_args ()) "foo" _bootvar__1)
);;
# 21 "mirage/main.ml"

let app_make__3 = lazy (
  let __key_gen__2 = Lazy.force key_gen__2 in
  __key_gen__2 >>= fun _key_gen__2 ->
  App_make__3.start _key_gen__2
);;
# 28 "mirage/main.ml"

let () =
  let t = Lazy.force app_make__3 in
  run t
;;
